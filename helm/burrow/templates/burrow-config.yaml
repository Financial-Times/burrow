kind: ConfigMap
metadata:
  name: burrow-config
apiVersion: v1
data:
  burrow.cfg: |-
    [general]
    logconfig=/config/logging.cfg

    [zookeeper]
    hostname={{ .Values.zk.host }}
    port={{ .Values.zk.port }}

    [kafka "local"]
    broker={{ .Values.kafka.host }}
    broker-port={{ .Values.kafka.port }}
    zookeeper={{ .Values.zk.host }}
    zookeeper-port={{ .Values.zk.port }}
    zookeeper-path=/
    zookeeper-offsets=true

    [tickers]
    broker-offsets=60

    [lagcheck]
    intervals=10
    expire-group=604800
    min-distance=1
    zookeeper-interval=60
    zk-group-refresh=300

    [httpserver]
    server=on
    port=8080

  logging.cfg: |-
    <seelog minlevel="info">
      <outputs formatid="main">
        <console/>
      </outputs>
      <formats>
        <format id="main" format="%Date(2006-01-02 15:04:05) [%LEVEL] %Msg%n"/>
      </formats>
    </seelog>

  burrow.toml: |-
    [zookeeper]
    servers=[ "zookeeper:2181" ]
    timeout=6
    root-path="/burrow"

    [cluster.local]
    class-name="kafka"
    servers=[ "kafka:9092" ]
    topic-refresh=60
    offset-refresh=30

    [consumer.local]
    class-name="kafka"
    cluster="local"
    servers=[ "kafka:9092" ]
    group-blacklist="^(console-consumer-|python-kafka-consumer-).*$"
    group-whitelist=""

    [consumer.local_zk]
    class-name="kafka_zk"
    cluster="local"
    servers=[ "zookeeper:2181" ]
    zookeeper-path="/local"
    zookeeper-timeout=30
    group-blacklist="^(console-consumer-|python-kafka-consumer-).*$"
    group-whitelist=""

    [httpserver.default]
    address=":8000"
